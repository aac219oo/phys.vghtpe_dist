"use strict";(self.webpackChunkmy_new_project=self.webpackChunkmy_new_project||[]).push([[837],{2837:(A,l,s)=>{s.r(l),s.d(l,{PRATModule:()=>b});var d=s(6733),u=s(7910),a=s(3226),t=s(4966),f=s(553),c=s(1314);let m=(()=>{class n{constructor(){this.riskFields=[{title:"\u6703\u54e1ID",from:"memberID",to:"memberID",update:"",type:"string"},{title:"\u8a55\u4f30\u985e\u578b",from:"type",to:"type",update:"",type:"string"},{title:"\u6027\u5225",from:"gender",to:"gender",update:"",type:"Number"},{title:"\u5e74\u9f61",from:"age",to:"age",update:"",type:"Number"},{title:"\u8eab\u9ad8",from:"Height",to:"Height",update:"",type:"Number"},{title:"\u9ad4\u91cd",from:"Weight",to:"Weight",update:"",type:"Number"},{title:"\u8170\u570d",from:"Waist",to:"Waist",update:"",type:"Number"},{title:"\u6536\u7e2e\u58d3",from:"Sbp",to:"Sbp",update:"",type:"Number"},{title:"\u7e3d\u81bd\u56fa\u9187",from:"Chol",to:"Chol",update:"",type:"Number"},{title:"\u9ad8\u5bc6\u5ea6\u81bd\u56fa\u9187",from:"hdlc",to:"hdlc",update:"",type:"Number"},{title:"\u4f4e\u5bc6\u5ea6\u81bd\u56fa\u9187",from:"Ldlc",to:"Ldlc",update:"",type:"Number"},{title:"\u4e09\u9178\u7518\u6cb9\u8102",from:"Tg",to:"Tg",update:"",type:"Number"},{title:"\u7a7a\u8179\u8840\u7cd6",from:"Glu",to:"Glu",update:"",type:"Number"},{title:"\u662f\u5426\u6709\u7cd6\u5c3f\u75c5",from:"Diabetes",to:"Diabetes",update:"",type:"boolean"},{title:"\u662f\u5426\u6709\u9ad8\u8840\u58d3",from:"Hbp",to:"Hbp",update:"",type:"boolean"},{title:"\u5438\u83f8\u7fd2\u6163",from:"smoke",to:"smoke",update:"",type:"boolean"}]}transformData(r){if(r){var o={};return this.riskFields.forEach((e,i)=>{o[e.to]="boolean"===e.type?"1"==r[e.from]?.toUpperCase():r[e.from]}),o}}transformJSONtoUser(r){if(r){var o=JSON.parse(r);return this.riskFields.forEach((e,i)=>{}),o}}transformDataToServer(r){var o=r,e={};return this.riskFields.forEach((i,p)=>{if(i.update)switch(i.type){case"DateString":default:e[i.update]=o[i.to];break;case"boolean":e[i.update]=o[i.to]?"1":"0"}}),e}static#t=this.\u0275fac=function(o){return new(o||n)};static#e=this.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),h=(()=>{class n{constructor(r,o){this.http=r,this.rd=o,this.riskCalculateAPI=f.N.ApiUrl+"api/risk_calculate.aspx"}submitCalculateData(r,o){var e=new URL(this.riskCalculateAPI),i=this.rd.transformDataToServer(r),p=new URLSearchParams(i);return e.search=p.toString(),this.http.get(e.href).pipe()}static#t=this.\u0275fac=function(o){return new(o||n)(t.LFG(c.eN),t.LFG(m))};static#e=this.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),g=(()=>{class n{constructor(r,o,e,i){this.us=r,this.rs=o,this.rd=e,this.fb=i,this.formControls={},this.state=new u.K,this.icons=[{pic:"../../assets/images/CHD.png",CH:"\u51a0\u5fc3\u75c5",EN:"CHD"},{pic:"../../assets/images/Stroke.png",CH:"\u8166\u4e2d\u98a8",EN:"Stroke"},{pic:"../../assets/images/Diabetes.png",CH:"\u7cd6\u5c3f\u75c5",EN:"Diabetes"},{pic:"../../assets/images/Hypertension.png",CH:"\u9ad8\u8840\u58d3",EN:"Hypertension"},{pic:"../../assets/images/MACE.png",CH:"\u5fc3\u8840\u7ba1\u4e0d\u826f\u4e8b\u4ef6",EN:"MACE"}]}ngOnInit(){this.fields=this.rd.riskFields,this.user=this.us.user,this.createForm()}createForm(){for(var r in this.us.user){var o=this.fb.control(this.us.user[r]);this.formControls[r]=this.addValidator(r,o)}this.form=this.fb.group(this.formControls),this.state=new u.K}addValidator(r,o){switch(r){case"email":o.validator=a.kI.compose([a.kI.required,a.kI.email]);break;case"birthday":case"cellphone":case"realname":case"city":case"address":o.validator=a.kI.required}return o}submit(r){this.form.disable(),this.setState(!0,!1,!1,!1),this.us.uploadUser(r,"update").subscribe(o=>{this.form.enable(),"OK"==o[0].DataCheck?(this.setState(!1,!0,!0,!1),this.us.updateLocalUser(this.form.value)):(console.log("\u66f4\u65b0\u5931\u6557\uff01"),this.setState(!1,!0,!1,!1))},o=>{console.log("\u66f4\u65b0\u5931\u6557\uff01",o),this.form.enable(),this.setState(!1,!0,!1,!0)})}setState(r,o,e,i){this.state.uploading=r,this.state.isUploaded=o,this.state.success=e,this.state.hasError=i}static#t=this.\u0275fac=function(o){return new(o||n)(t.Y36(u.E),t.Y36(h),t.Y36(m),t.Y36(a.qu))};static#e=this.\u0275cmp=t.Xpm({type:n,selectors:[["PRAT"]],decls:103,vars:21,consts:[["id","PRA",1,"m-auto"],[1,"title-pic"],[1,"title-pic-text-box"],[1,"title-pic-text-box-CH"],[1,"d-flex","flex-column","justify-content-center","flex-sm-row"],[1,"title-pic-text-box-EN"],[1,"title-one","d-flex","m-auto","justify-content-center","align-items-center"],[1,"title-right"],[1,"one"],[1,"title-left"],[1,"text-center"],[1,"img-box"],["_ngcontent-ng-c1180050304","","src","../../assets/images/Line 11.png","alt","",1,"w-100"],[3,"formGroup","autocomplete"],[1,"from-box","d-sm-flex","justify-content-evenly"],[1,"left-box"],[1,"w-100"],[1,"radio","d-md-flex","justify-content-end","lable-span-md-box"],["for","",1,""],["type","radio","name","gender","id","man","value","1",3,"formControl"],["type","radio","name","gender","id","woman","value","0",3,"formControl"],[1,"lable-span-md-box"],["for",""],["type","number","placeholder","30~70",1,"form-text",3,"formControl"],["type","number","placeholder","120~210",1,"form-text",3,"formControl"],["type","number","placeholder","35~200",1,"form-text",3,"formControl"],[1,"left-icon"],["type","number","placeholder","40~120",1,"form-text",3,"formControl"],["type","number","placeholder","<130",1,"form-text",3,"formControl"],["type","number","placeholder","120~200",1,"form-text",3,"formControl"],[1,"right-box"],["type","number","name","hdlc","placeholder",">40",1,"form-text",3,"formControl"],["type","number","name","Ldlc","placeholder","<130",1,"form-text",3,"formControl"],["type","number","name","Tg","placeholder","<135",1,"form-text",3,"formControl"],["type","number","name","Glu","placeholder","70~100",1,"form-text",3,"formControl"],[1,"radio","lable-span-md-box"],["type","radio","name","Diabetes","id","diabetesYes","value","true",3,"formControl"],["type","radio","name","Diabetes","id","diabetesNo","value","false",3,"formControl"],["type","radio","name","Hbp","id","hbpYes","value","true",3,"formControl"],["type","radio","name","Hbp","id","hbpNo","value","false",3,"formControl"],["type","radio","name","smoke","id","smokeYes","value","true",3,"formControl"],["type","radio","name","smoke","id","smokeNo","value","false",3,"formControl"],["type","button",1,"PRAT2-submit",3,"disabled","click"]],template:function(o,e){1&o&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div"),t._uU(6,"\u500b\u4eba\u98a8\u96aa\u8a55\u4f30\u53ca"),t.qZA(),t.TgZ(7,"div"),t._uU(8,"\u5065\u6aa2\u7d44\u5957\u5efa\u8b70"),t.qZA()()(),t.TgZ(9,"div",5),t._uU(10,"PersonalizedRiskAssessment"),t.qZA()()(),t.TgZ(11,"div",6)(12,"div",7)(13,"span",8),t._uU(14,"1"),t.qZA()(),t.TgZ(15,"div",9)(16,"div"),t._uU(17,"\u63d0\u5171\u60a8\u500b\u4eba\u5065\u5eb7\u6578\u64da\uff0c\u4e00\u6b21\u6027\u8a55\u4f30\u4e94\u7a2e\u75be\u75c5\u7684\u98a8\u96aa"),t.qZA(),t.TgZ(18,"div",10),t._uU(19,"(\u6578\u64da\u63d0\u4f9b\u6108\u5b8c\u6574)"),t.qZA()()(),t.TgZ(20,"div",11),t._UZ(21,"img",12),t.qZA(),t.TgZ(22,"form",13)(23,"div",14)(24,"div",15)(25,"ul",16)(26,"li",17)(27,"label",18),t._uU(28,"\u6027\u5225:"),t.qZA(),t.TgZ(29,"span"),t._UZ(30,"input",19),t._uU(31,"\u7537\u751f "),t._UZ(32,"input",20),t._uU(33,"\u5973\u751f "),t.qZA()(),t.TgZ(34,"li",21)(35,"label",22),t._uU(36,"\u5e74\u9f61:"),t.qZA(),t.TgZ(37,"span"),t._UZ(38,"input",23),t.qZA()(),t.TgZ(39,"li",21)(40,"label",22),t._uU(41,"\u8eab\u9ad8(\u516c\u5206):"),t.qZA(),t._UZ(42,"input",24),t.qZA(),t.TgZ(43,"li",21)(44,"label",22),t._uU(45,"\u9ad4\u91cd(\u516c\u65a4):"),t.qZA(),t._UZ(46,"input",25),t.qZA(),t.TgZ(47,"li",21)(48,"label",22)(49,"span",26),t._uU(50," \u8170\u570d(\u516c\u5206):"),t.qZA()(),t._UZ(51,"input",27),t.qZA(),t.TgZ(52,"li",21)(53,"label",22)(54,"span",26),t._uU(55,"\u6536\u7e2e\u58d3(mm/Hg):"),t.qZA()(),t._UZ(56,"input",28),t.qZA(),t.TgZ(57,"li",21)(58,"label",22),t._uU(59,"\u7e3d\u81bd\u56fa\u9187(mm/Hg):"),t.qZA(),t._UZ(60,"input",29),t.qZA()()(),t.TgZ(61,"div",30)(62,"ul")(63,"li",21)(64,"label",22),t._uU(65,"\u9ad8\u5bc6\u5ea6\u81bd\u56fa\u9187(mg/dl):"),t.qZA(),t._UZ(66,"input",31),t.qZA(),t.TgZ(67,"li",21)(68,"label",22),t._uU(69,"\u4f4e\u5bc6\u5ea6\u81bd\u56fa\u9187(mg/dl):"),t.qZA(),t._UZ(70,"input",32),t.qZA(),t.TgZ(71,"li",21)(72,"label",22),t._uU(73,"\u4e09\u9178\u7518\u6cb9\u916f(mg/dl):"),t.qZA(),t._UZ(74,"input",33),t.qZA(),t.TgZ(75,"li",21)(76,"label",22),t._uU(77,"\u7a7a\u8179\u8840\u7cd6(mg/dl):"),t.qZA(),t._UZ(78,"input",34),t.qZA(),t.TgZ(79,"li",35)(80,"label",22),t._uU(81,"\u662f\u5426\u6709\u7cd6\u5c3f\u75c5:"),t.qZA(),t._UZ(82,"input",36),t._uU(83,"\u6709 "),t._UZ(84,"input",37),t._uU(85,"\u6c92\u6709 "),t.qZA(),t.TgZ(86,"li",35)(87,"label",22),t._uU(88,"\u662f\u5426\u6709\u9ad8\u8840\u58d3:"),t.qZA(),t._UZ(89,"input",38),t._uU(90,"\u6709 "),t._UZ(91,"input",39),t._uU(92,"\u6c92\u6709 "),t.qZA(),t.TgZ(93,"li",35)(94,"label",22),t._uU(95,"\u5438\u83f8\u7fd2\u6163:"),t.qZA(),t._UZ(96,"input",40),t._uU(97,"\u6709 "),t._UZ(98,"input",41),t._uU(99,"\u6c92\u6709 "),t.qZA()()()(),t.TgZ(100,"div",10)(101,"button",42),t.NdJ("click",function(){return e.submit(e.form.value)}),t._uU(102,"\u8a08\u7b97"),t.qZA()()()()),2&o&&(t.xp6(22),t.Q6J("formGroup",e.form)("autocomplete",e.config.autocomplete),t.xp6(8),t.Q6J("formControl",e.formControls.gender),t.xp6(2),t.Q6J("formControl",e.formControls.gender),t.xp6(6),t.Q6J("formControl",e.formControls.age),t.xp6(4),t.Q6J("formControl",e.formControls.Height),t.xp6(4),t.Q6J("formControl",e.formControls.Weight),t.xp6(5),t.Q6J("formControl",e.formControls.Waist),t.xp6(5),t.Q6J("formControl",e.formControls.Sbp),t.xp6(4),t.Q6J("formControl",e.formControls.Chol),t.xp6(6),t.Q6J("formControl",e.formControls.hdlc),t.xp6(4),t.Q6J("formControl",e.formControls.Ldlc),t.xp6(4),t.Q6J("formControl",e.formControls.Tg),t.xp6(4),t.Q6J("formControl",e.formControls.Glu),t.xp6(4),t.Q6J("formControl",e.formControls.Diabetes),t.xp6(2),t.Q6J("formControl",e.formControls.Diabetes),t.xp6(5),t.Q6J("formControl",e.formControls.Hbp),t.xp6(2),t.Q6J("formControl",e.formControls.Hbp),t.xp6(5),t.Q6J("formControl",e.formControls.smoke),t.xp6(2),t.Q6J("formControl",e.formControls.smoke),t.xp6(3),t.Q6J("disabled",!e.form.valid))},dependencies:[a._Y,a.Fj,a.wV,a._,a.JJ,a.JL,a.oH,a.sg],styles:['ul[_ngcontent-%COMP%], li[_ngcontent-%COMP%]{margin:0;padding:0}li[_ngcontent-%COMP%]{margin-bottom:20px}.img-box[_ngcontent-%COMP%]{margin:20px 0}.title-one[_ngcontent-%COMP%]{padding:20px 0;text-align:center;font-size:1.125rem;font-weight:bolder}.one[_ngcontent-%COMP%]{background-color:var(--secondary-color);padding:10px 20px;margin:10px;border-radius:50%;color:#fff;font-size:1.875rem;font-weight:bolder}.from-box[_ngcontent-%COMP%]{width:80%;margin:auto;font-size:.9375rem}input[_ngcontent-%COMP%]{width:80px;border:none;border-bottom:2px solid rgba(128,128,128,.438)}input[type=radio][_ngcontent-%COMP%]{width:20px}input[type=text][_ngcontent-%COMP%]{margin-left:10px}.left-icon[_ngcontent-%COMP%]{position:relative}.left-icon[_ngcontent-%COMP%]:before{position:absolute;content:"";width:20px;height:20px;background-image:url(https://media.istockphoto.com/id/592031250/zh/%E7%85%A7%E7%89%87/milky-way-and-pink-light-at-mountains-night-colorful-landscape.jpg?s=612x612&w=0&k=20&c=XjvBw-fCG-ZVlOe1L7OMmw0vT66twMnKr9O2CbPch04%3D&imgrefurl=https://www.istockphoto.com/hk/%E5%9C%96%E7%89%87/%E9%8A%80%E6%B2%B3&docid=GLNq3fPGzTFNmM&tbnid=cpEXu_GjgVgU0M&vet=12ahUKEwjGjZT7v7qFAxWMdfUHHTIQCfYQM3oECDIQAA..i&w=612&h=408&hcb=2&ved=2ahUKEwjGjZT7v7qFAxWMdfUHHTIQCfYQM3oECDIQAA);top:50%;left:-10px;transform:translate(-50%,-50%)}.PRAT2-submit[_ngcontent-%COMP%]{border:none;background-color:var(--secondary-color);padding:10px 20px;border-radius:20px;color:#fff;margin:20px 0}@media screen and (min-width: 576px){.from-box[_ngcontent-%COMP%]{width:100%;margin:auto;max-width:950px;white-space:nowrap}.lable-span-md-box[_ngcontent-%COMP%]{display:flex}.lable-span-md-box[_ngcontent-%COMP%] > label[_ngcontent-%COMP%]{text-align:end;width:45%}.lable-span-md-box[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{width:55%}input[_ngcontent-%COMP%]{width:auto}input[type=radio][_ngcontent-%COMP%]{width:40px}}']})}return n})();var C=s(6646);let b=(()=>{class n{static#t=this.\u0275fac=function(o){return new(o||n)};static#e=this.\u0275mod=t.oAB({type:n});static#o=this.\u0275inj=t.cJS({imports:[d.ez,a.u5,a.UX,C.Bz.forChild([{path:"",component:g}])]})}return n})()}}]);