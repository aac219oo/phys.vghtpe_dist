import{a as f}from"./chunk-DDGGW3FN.js";import{I as c,Rb as x,S as l,V as m,o as r}from"./chunk-PDCXLAN3.js";var S=(()=>{let a=class a{constructor(e){this.http=e,this.bookListAPI=f.ApiUrl+"api/BookDetail_List.aspx",this.getPageIindex$=this.http.get("assets/json/page_index.json").pipe(c(1))}getBookData(e){var i=f.ApiUrl+"api/bookDetail.aspx?BookID=";return this.getText(i+e).pipe(c(1),r(t=>t.replace(/\t/g," ")),r(t=>t.replace(/\\(?!\")/g,"\uFF0F")),r(t=>JSON.parse(t)),r(t=>t[0]))}searchSerieBooks(e,i,t,p=void 0){var s={pageIndex:i.toString(),recordsPerPage:t.toString(),type:e};p=="price"&&(s.sort=1),p=="price2"&&(s.sort=2),p=="update"&&(s.sort=3);var n=new URL(this.bookListAPI),g=new URLSearchParams(s);return n.search=g.toString(),this.getText(n.href).pipe(c(1),r(o=>JSON.parse(o)))}searchByKeyword(e,i,t,p){var s={pageIndex:i.toString(),recordsPerPage:t.toString(),AUTHOR:e,BKNAME:e,BookID:e};p&&(s.type="sc");var n=new URL(this.bookListAPI),g=new URLSearchParams(s);return n.search=g.toString(),this.getText(n.href).pipe(c(1),r(o=>o.replace(/\t/g," ")),r(o=>o.replace(/\\(?!\")/g,"\uFF0F")),r(o=>JSON.parse(o)))}get(e){return this.http.get(e)}getText(e){return this.http.get(e,{responseType:"text"})}};a.\u0275fac=function(i){return new(i||a)(m(x))},a.\u0275prov=l({token:a,factory:a.\u0275fac,providedIn:"root"});let h=a;return h})();export{S as a};
