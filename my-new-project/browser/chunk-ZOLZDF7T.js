import{e as C,f as G}from"./chunk-44S56WTK.js";import{a as w}from"./chunk-DTWWXHZH.js";import{b as F,c as f,e as M,f as N,j as P,k as O,l as H,m as j,n as B,r as I,s as T,t as U}from"./chunk-EJQMEEQK.js";import{Ea as m,Pb as D,Qa as a,Ra as i,Rb as S,S as c,Sa as s,T as y,V as b,X as x,Y as E,_a as A,_b as k,fb as r,ua as l,va as d}from"./chunk-PDCXLAN3.js";var h=(()=>{let o=class o{constructor(){this.riskFields=[{title:"\u6703\u54E1ID",from:"memberID",to:"memberID",update:"",type:"string"},{title:"\u8A55\u4F30\u985E\u578B",from:"type",to:"type",update:"",type:"string"},{title:"\u6027\u5225",from:"gender",to:"gender",update:"",type:"Number"},{title:"\u5E74\u9F61",from:"age",to:"age",update:"",type:"Number"},{title:"\u8EAB\u9AD8",from:"Height",to:"Height",update:"",type:"Number"},{title:"\u9AD4\u91CD",from:"Weight",to:"Weight",update:"",type:"Number"},{title:"\u8170\u570D",from:"Waist",to:"Waist",update:"",type:"Number"},{title:"\u6536\u7E2E\u58D3",from:"Sbp",to:"Sbp",update:"",type:"Number"},{title:"\u7E3D\u81BD\u56FA\u9187",from:"Chol",to:"Chol",update:"",type:"Number"},{title:"\u9AD8\u5BC6\u5EA6\u81BD\u56FA\u9187",from:"hdlc",to:"hdlc",update:"",type:"Number"},{title:"\u4F4E\u5BC6\u5EA6\u81BD\u56FA\u9187",from:"Ldlc",to:"Ldlc",update:"",type:"Number"},{title:"\u4E09\u9178\u7518\u6CB9\u8102",from:"Tg",to:"Tg",update:"",type:"Number"},{title:"\u7A7A\u8179\u8840\u7CD6",from:"Glu",to:"Glu",update:"",type:"Number"},{title:"\u662F\u5426\u6709\u7CD6\u5C3F\u75C5",from:"Diabetes",to:"Diabetes",update:"",type:"boolean"},{title:"\u662F\u5426\u6709\u9AD8\u8840\u58D3",from:"Hbp",to:"Hbp",update:"",type:"boolean"},{title:"\u5438\u83F8\u7FD2\u6163",from:"smoke",to:"smoke",update:"",type:"boolean"}]}transformData(n){if(n){var t={};return this.riskFields.forEach((e,u)=>{switch(e.type){case"boolean":t[e.to]=n[e.from]?.toUpperCase()=="1";break;default:t[e.to]=n[e.from];break}}),t}else return}transformJSONtoUser(n){if(n){var t=JSON.parse(n);return this.riskFields.forEach((e,u)=>{switch(e.type){default:break}}),t}else return}transformDataToServer(n){var t=n,e={};return this.riskFields.forEach((u,v)=>{if(u.update)switch(u.type){case"DateString":e[u.update]=t[u.to];break;case"boolean":e[u.update]=t[u.to]?"1":"0";break;default:e[u.update]=t[u.to];break}}),e}};o.\u0275fac=function(t){return new(t||o)},o.\u0275prov=c({token:o,factory:o.\u0275fac,providedIn:"root"});let p=o;return p})();var L=(()=>{let o=class o{constructor(n,t){this.http=n,this.rd=t,this.riskCalculateAPI=w.ApiUrl+"api/risk_calculate.aspx"}submitCalculateData(n,t){var e=new URL(this.riskCalculateAPI),u=this.rd.transformDataToServer(n),v=new URLSearchParams(u);return e.search=v.toString(),this.http.get(e.href).pipe()}};o.\u0275fac=function(t){return new(t||o)(b(S),b(h))},o.\u0275prov=c({token:o,factory:o.\u0275fac,providedIn:"root"});let p=o;return p})();var W=(()=>{let o=class o{constructor(n,t,e,u){this.us=n,this.rs=t,this.rd=e,this.fb=u,this.formControls={},this.state=new C,this.icons=[{pic:"../../assets/images/CHD.png",CH:"\u51A0\u5FC3\u75C5",EN:"CHD"},{pic:"../../assets/images/Stroke.png",CH:"\u8166\u4E2D\u98A8",EN:"Stroke"},{pic:"../../assets/images/Diabetes.png",CH:"\u7CD6\u5C3F\u75C5",EN:"Diabetes"},{pic:"../../assets/images/Hypertension.png",CH:"\u9AD8\u8840\u58D3",EN:"Hypertension"},{pic:"../../assets/images/MACE.png",CH:"\u5FC3\u8840\u7BA1\u4E0D\u826F\u4E8B\u4EF6",EN:"MACE"}]}ngOnInit(){this.fields=this.rd.riskFields,this.user=this.us.user,this.createForm()}createForm(){for(var n in this.us.user){var t=this.fb.control(this.us.user[n]);this.formControls[n]=this.addValidator(n,t)}this.form=this.fb.group(this.formControls),this.state=new C}addValidator(n,t){switch(n){case"email":t.validator=f.compose([f.required,f.email]);break;case"birthday":case"cellphone":case"realname":case"city":case"address":t.validator=f.required;break}return t}submit(n){this.form.disable(),this.setState(!0,!1,!1,!1),this.us.uploadUser(n,"update").subscribe(t=>{this.form.enable(),t[0].DataCheck=="OK"?(this.setState(!1,!0,!0,!1),this.us.updateLocalUser(this.form.value)):(console.log("\u66F4\u65B0\u5931\u6557\uFF01"),this.setState(!1,!0,!1,!1))},t=>{console.log("\u66F4\u65B0\u5931\u6557\uFF01",t),this.form.enable(),this.setState(!1,!0,!1,!0)})}setState(n,t,e,u){this.state.uploading=n,this.state.isUploaded=t,this.state.success=e,this.state.hasError=u}};o.\u0275fac=function(t){return new(t||o)(d(G),d(L),d(h),d(I))},o.\u0275cmp=x({type:o,selectors:[["PRAT"]],decls:103,vars:21,consts:[["id","PRA",1,"m-auto"],[1,"title-pic"],[1,"title-pic-text-box"],[1,"title-pic-text-box-CH"],[1,"d-flex","flex-column","justify-content-center","flex-sm-row"],[1,"title-pic-text-box-EN"],[1,"title-one","d-flex","m-auto","justify-content-center","align-items-center"],[1,"title-right"],[1,"one"],[1,"title-left"],[1,"text-center"],[1,"img-box"],["_ngcontent-ng-c1180050304","","src","../../assets/images/Line 11.png","alt","",1,"w-100"],[3,"formGroup","autocomplete"],[1,"from-box","d-sm-flex","justify-content-evenly"],[1,"left-box"],[1,"w-100"],[1,"radio","d-md-flex","justify-content-end","lable-span-md-box"],["for","",1,""],["type","radio","name","gender","id","man","value","1",3,"formControl"],["type","radio","name","gender","id","woman","value","0",3,"formControl"],[1,"lable-span-md-box"],["for",""],["type","number","placeholder","30~70",1,"form-text",3,"formControl"],["type","number","placeholder","120~210",1,"form-text",3,"formControl"],["type","number","placeholder","35~200",1,"form-text",3,"formControl"],[1,"left-icon"],["type","number","placeholder","40~120",1,"form-text",3,"formControl"],["type","number","placeholder","<130",1,"form-text",3,"formControl"],["type","number","placeholder","120~200",1,"form-text",3,"formControl"],[1,"right-box"],["type","number","name","hdlc","placeholder",">40",1,"form-text",3,"formControl"],["type","number","name","Ldlc","placeholder","<130",1,"form-text",3,"formControl"],["type","number","name","Tg","placeholder","<135",1,"form-text",3,"formControl"],["type","number","name","Glu","placeholder","70~100",1,"form-text",3,"formControl"],[1,"radio","lable-span-md-box"],["type","radio","name","Diabetes","id","diabetesYes","value","true",3,"formControl"],["type","radio","name","Diabetes","id","diabetesNo","value","false",3,"formControl"],["type","radio","name","Hbp","id","hbpYes","value","true",3,"formControl"],["type","radio","name","Hbp","id","hbpNo","value","false",3,"formControl"],["type","radio","name","smoke","id","smokeYes","value","true",3,"formControl"],["type","radio","name","smoke","id","smokeNo","value","false",3,"formControl"],["type","button",1,"PRAT2-submit",3,"disabled","click"]],template:function(t,e){t&1&&(a(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div"),r(6,"\u500B\u4EBA\u98A8\u96AA\u8A55\u4F30\u53CA"),i(),a(7,"div"),r(8,"\u5065\u6AA2\u7D44\u5957\u5EFA\u8B70"),i()()(),a(9,"div",5),r(10,"PersonalizedRiskAssessment"),i()()(),a(11,"div",6)(12,"div",7)(13,"span",8),r(14,"1"),i()(),a(15,"div",9)(16,"div"),r(17,"\u63D0\u5171\u60A8\u500B\u4EBA\u5065\u5EB7\u6578\u64DA\uFF0C\u4E00\u6B21\u6027\u8A55\u4F30\u4E94\u7A2E\u75BE\u75C5\u7684\u98A8\u96AA"),i(),a(18,"div",10),r(19,"(\u6578\u64DA\u63D0\u4F9B\u6108\u5B8C\u6574)"),i()()(),a(20,"div",11),s(21,"img",12),i(),a(22,"form",13)(23,"div",14)(24,"div",15)(25,"ul",16)(26,"li",17)(27,"label",18),r(28,"\u6027\u5225:"),i(),a(29,"span"),s(30,"input",19),r(31,"\u7537\u751F "),s(32,"input",20),r(33,"\u5973\u751F "),i()(),a(34,"li",21)(35,"label",22),r(36,"\u5E74\u9F61:"),i(),a(37,"span"),s(38,"input",23),i()(),a(39,"li",21)(40,"label",22),r(41,"\u8EAB\u9AD8(\u516C\u5206):"),i(),s(42,"input",24),i(),a(43,"li",21)(44,"label",22),r(45,"\u9AD4\u91CD(\u516C\u65A4):"),i(),s(46,"input",25),i(),a(47,"li",21)(48,"label",22)(49,"span",26),r(50," \u8170\u570D(\u516C\u5206):"),i()(),s(51,"input",27),i(),a(52,"li",21)(53,"label",22)(54,"span",26),r(55,"\u6536\u7E2E\u58D3(mm/Hg):"),i()(),s(56,"input",28),i(),a(57,"li",21)(58,"label",22),r(59,"\u7E3D\u81BD\u56FA\u9187(mm/Hg):"),i(),s(60,"input",29),i()()(),a(61,"div",30)(62,"ul")(63,"li",21)(64,"label",22),r(65,"\u9AD8\u5BC6\u5EA6\u81BD\u56FA\u9187(mg/dl):"),i(),s(66,"input",31),i(),a(67,"li",21)(68,"label",22),r(69,"\u4F4E\u5BC6\u5EA6\u81BD\u56FA\u9187(mg/dl):"),i(),s(70,"input",32),i(),a(71,"li",21)(72,"label",22),r(73,"\u4E09\u9178\u7518\u6CB9\u916F(mg/dl):"),i(),s(74,"input",33),i(),a(75,"li",21)(76,"label",22),r(77,"\u7A7A\u8179\u8840\u7CD6(mg/dl):"),i(),s(78,"input",34),i(),a(79,"li",35)(80,"label",22),r(81,"\u662F\u5426\u6709\u7CD6\u5C3F\u75C5:"),i(),s(82,"input",36),r(83,"\u6709 "),s(84,"input",37),r(85,"\u6C92\u6709 "),i(),a(86,"li",35)(87,"label",22),r(88,"\u662F\u5426\u6709\u9AD8\u8840\u58D3:"),i(),s(89,"input",38),r(90,"\u6709 "),s(91,"input",39),r(92,"\u6C92\u6709 "),i(),a(93,"li",35)(94,"label",22),r(95,"\u5438\u83F8\u7FD2\u6163:"),i(),s(96,"input",40),r(97,"\u6709 "),s(98,"input",41),r(99,"\u6C92\u6709 "),i()()()(),a(100,"div",10)(101,"button",42),A("click",function(){return e.submit(e.form.value)}),r(102,"\u8A08\u7B97"),i()()()()),t&2&&(l(22),m("formGroup",e.form)("autocomplete",e.config.autocomplete),l(8),m("formControl",e.formControls.gender),l(2),m("formControl",e.formControls.gender),l(6),m("formControl",e.formControls.age),l(4),m("formControl",e.formControls.Height),l(4),m("formControl",e.formControls.Weight),l(5),m("formControl",e.formControls.Waist),l(5),m("formControl",e.formControls.Sbp),l(4),m("formControl",e.formControls.Chol),l(6),m("formControl",e.formControls.hdlc),l(4),m("formControl",e.formControls.Ldlc),l(4),m("formControl",e.formControls.Tg),l(4),m("formControl",e.formControls.Glu),l(4),m("formControl",e.formControls.Diabetes),l(2),m("formControl",e.formControls.Diabetes),l(5),m("formControl",e.formControls.Hbp),l(2),m("formControl",e.formControls.Hbp),l(5),m("formControl",e.formControls.smoke),l(2),m("formControl",e.formControls.smoke),l(3),m("disabled",!e.form.valid))},dependencies:[P,F,O,H,M,N,j,B],styles:['ul[_ngcontent-%COMP%], li[_ngcontent-%COMP%]{margin:0;padding:0}li[_ngcontent-%COMP%]{margin-bottom:20px}.img-box[_ngcontent-%COMP%]{margin:20px 0}.title-one[_ngcontent-%COMP%]{padding:20px 0;text-align:center;font-size:18px;font-weight:bolder}.one[_ngcontent-%COMP%]{background-color:var(--secondary-color);padding:10px 20px;margin:10px;border-radius:50%;color:#fff;font-size:30px;font-weight:bolder}.from-box[_ngcontent-%COMP%]{width:80%;margin:auto;font-size:15px}input[_ngcontent-%COMP%]{width:80px;border:none;border-bottom:2px solid rgba(128,128,128,.438)}input[type=radio][_ngcontent-%COMP%]{width:20px}input[type=text][_ngcontent-%COMP%]{margin-left:10px}.left-icon[_ngcontent-%COMP%]{position:relative}.left-icon[_ngcontent-%COMP%]:before{position:absolute;content:"";width:20px;height:20px;background-image:url(https://media.istockphoto.com/id/592031250/zh/%E7%85%A7%E7%89%87/milky-way-and-pink-light-at-mountains-night-colorful-landscape.jpg?s=612x612&w=0&k=20&c=XjvBw-fCG-ZVlOe1L7OMmw0vT66twMnKr9O2CbPch04%3D&imgrefurl=https://www.istockphoto.com/hk/%E5%9C%96%E7%89%87/%E9%8A%80%E6%B2%B3&docid=GLNq3fPGzTFNmM&tbnid=cpEXu_GjgVgU0M&vet=12ahUKEwjGjZT7v7qFAxWMdfUHHTIQCfYQM3oECDIQAA..i&w=612&h=408&hcb=2&ved=2ahUKEwjGjZT7v7qFAxWMdfUHHTIQCfYQM3oECDIQAA);top:50%;left:-10px;transform:translate(-50%,-50%)}.PRAT2-submit[_ngcontent-%COMP%]{border:none;background-color:var(--secondary-color);padding:10px 20px;border-radius:20px;color:#fff;margin:20px 0}@media screen and (min-width: 576px){.from-box[_ngcontent-%COMP%]{width:100%;margin:auto;max-width:950px;white-space:nowrap}.lable-span-md-box[_ngcontent-%COMP%]{display:flex}.lable-span-md-box[_ngcontent-%COMP%] > label[_ngcontent-%COMP%]{text-align:end;width:45%}.lable-span-md-box[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{width:55%}input[_ngcontent-%COMP%]{width:auto}input[type=radio][_ngcontent-%COMP%]{width:40px}}']});let p=o;return p})();var te=(()=>{let o=class o{};o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=E({type:o}),o.\u0275inj=y({imports:[D,T,U,k.forChild([{path:"",component:W}])]});let p=o;return p})();export{te as PRATModule};
